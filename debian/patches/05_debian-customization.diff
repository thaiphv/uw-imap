diff -ruN imap-2001a.orig/Makefile imap-2001a/Makefile
--- imap-2001a.orig/Makefile	Tue Oct 23 00:46:33 2001
+++ imap-2001a/Makefile	Sun Jan 13 14:41:17 2002
@@ -212,7 +212,7 @@
 #	gradually-increasing intervals, starting at 2800-2900, and becoming
 #	permanent at 48,300.
 
-EXTRACFLAGS=
+EXTRACFLAGS= -DDISABLE_POP_PROXY
 
 
 # Extra linker flags (additional/alternative libraries, etc.)
@@ -278,9 +278,9 @@
 
 # Knotheads moved Kerberos and SSL locations on these platforms
 
-lrh:	an
-	$(BUILD) BUILDTYPE=lnp \
-	SPECIALS="GSSDIR=/usr/kerberos SSLDIR=/usr/share/ssl SSLINCLUDE=/usr/include/openssl SSLLIB=/usr/lib"
+ldeb:	an
+	$(BUILD) BUILDTYPE=lnps \
+	SPECIALS="GSSDIR=debian/md5 SSLDIR=/usr/lib/ssl SSLINCLUDE=/usr/include/openssl SSLLIB=/usr/lib"
 
 
 # Linux shadow password support doesn't build on traditional systems, but most
diff -ruN imap-2001a.orig/src/imapd/Makefile imap-2001a/src/imapd/Makefile
--- imap-2001a.orig/src/imapd/Makefile	Thu Jun 28 13:23:36 2001
+++ imap-2001a/src/imapd/Makefile	Sun Jan 13 14:41:17 2002
@@ -37,7 +37,7 @@
 #    NULs in the message text are technically a violation of both the message
 #    format and the IMAP specification, they can happen.  Fortunately, most
 #    IMAP clients don't care.  Netscape hangs.
-#NSBD= -DNETSCAPE_BRAIN_DAMAGE=\"http://www.washington.edu/pine\"
+NSBD= -DNETSCAPE_BRAIN_DAMAGE=\"http://www.debian.org/~jaldhar/netscape_brain_damage.html\"
 
 
 # Un-comment this to get somewhat better interoperability with Microsoft
@@ -47,7 +47,7 @@
 # tells them to do this!  This bug is fixed in Mac OE, but as of this writing
 # Microsoft is non-committal about fixing it in the PC version.  Also note
 # that this is reported (but not confirmed) to break Microsoft Entourage.
-#MSBD= -DMICROSOFT_BRAIN_DAMAGE
+MSBD= -DMICROSOFT_BRAIN_DAMAGE
 
 
 # Un-comment this to get possibly better interoperability with Microsoft
diff -ruN imap-2001a.orig/src/imapd/imapd.8c imap-2001a/src/imapd/imapd.8c
--- imap-2001a.orig/src/imapd/imapd.8c	Mon Oct 12 22:31:21 1998
+++ imap-2001a/src/imapd/imapd.8c	Sun Jan 13 14:41:17 2002
@@ -3,7 +3,7 @@
 .SH NAME
 IMAPd \- Internet Message Access Protocol server
 .SH SYNOPSIS
-.B /usr/etc/imapd
+.B /usr/sbin/imapd
 .SH DESCRIPTION
 .I imapd
 is a server which supports the
@@ -26,7 +26,7 @@
 by many Unix-based clients.  To do this, the
 .I imapd
 binary must have a link to
-.I /etc/rimapd
+.I /usr/sbin/rimapd
 since this is where this software expects it to be located.
 .SH "SEE ALSO"
 rsh(1C) ipopd(8C)
diff -ruN imap-2001a.orig/src/ipopd/ipopd.8c imap-2001a/src/ipopd/ipopd.8c
--- imap-2001a.orig/src/ipopd/ipopd.8c	Thu Jan 16 20:52:10 1992
+++ imap-2001a/src/ipopd/ipopd.8c	Sun Jan 13 14:41:17 2002
@@ -3,9 +3,9 @@
 .SH NAME
 IPOPd \- Post Office Protocol server
 .SH SYNOPSIS
-.B /usr/etc/ipop2d
+.B /usr/sbin/ipop2d
 .PP
-.B /usr/etc/ipop3d
+.B /usr/sbin/ipop3d
 .SH DESCRIPTION
 .I IPOP2d
 and
@@ -27,6 +27,10 @@
 servers by specifying a login user name in the form <host>:<user>
 e.g.,
 .B SERVER.WASHINGTON.EDU:SMITH.
+.PP
+These daemons have been compiled with MD5 and APOP support.  See   
+.I /usr/share/doc/libc-client2001/md5.txt
+for additional information.
 .PP
 .I POPd
 is invoked by the internet server (see
diff -ruN imap-2001a.orig/src/osdep/unix/Makefile imap-2001a/src/osdep/unix/Makefile
--- imap-2001a.orig/src/osdep/unix/Makefile	Tue Nov  6 19:16:43 2001
+++ imap-2001a/src/osdep/unix/Makefile	Sun Jan 13 14:41:17 2002
@@ -74,7 +74,7 @@
 MAILSPOOL=$(SPOOLDIR)/mail
 NEWSSPOOL=$(SPOOLDIR)/news
 RSHPATH=/usr/ucb/rsh
-LOCKPGM=/etc/mlock
+LOCKPGM=/usr/bin/mlock
 
 
 # Default formats for creating new mailboxes and for empty mailboxes in the
diff -ruN imap-2001a.orig/src/osdep/unix/env_unix.c imap-2001a/src/osdep/unix/env_unix.c
--- imap-2001a.orig/src/osdep/unix/env_unix.c	Wed Oct 17 23:27:59 2001
+++ imap-2001a/src/osdep/unix/env_unix.c	Sun Jan 13 14:49:33 2002
@@ -631,6 +631,8 @@
   struct passwd *pw;
   struct stat sbuf;
   char tmp[MAILTMPLEN];
+
+  memset (tmp, 0, MAILTMPLEN); /* zero out tmp */
   if (myUserName) fatal ("env_init called twice!");
 				/* myUserName must be set before dorc() call */
   myUserName = cpystr (user ? user : ANONYMOUSUSER);
@@ -676,6 +678,8 @@
     myHomeDir = cpystr (home);	/* set home directory */
   }
 
+  if(!myHomeDir) myHomeDir = cpystr("");  /* if myHomeDir is still a null pointer */
+
   if (allowuserconfig) {	/* allow user config files */
     dorc (strcat (strcpy (tmp,myHomeDir),"/.mminit"),T);
     dorc (strcat (strcpy (tmp,myHomeDir),"/.imaprc"),NIL);
diff -ruN imap-2001a.orig/src/osdep/unix/tcp_unix.c imap-2001a/src/osdep/unix/tcp_unix.c
--- imap-2001a.orig/src/osdep/unix/tcp_unix.c	Fri Oct 26 23:25:12 2001
+++ imap-2001a/src/osdep/unix/tcp_unix.c	Sun Jan 13 14:41:17 2002
@@ -334,12 +334,12 @@
 				/* return immediately if ssh disabled */
     if (!(sshpath && (ti = sshtimeout))) return NIL;
 				/* ssh command prototype defined yet? */
-    if (!sshcommand) sshcommand = cpystr ("%s %s -l %s exec /etc/r%sd");
+    if (!sshcommand) sshcommand = cpystr ("%s %s -l %s exec /usr/sbin/r%sd");
   }
   else if (ti = rshtimeout) {	/* set rsh timeout */
 				/* rsh path/command prototypes defined yet? */
     if (!rshpath) rshpath = cpystr (RSHPATH);
-    if (!rshcommand) rshcommand = cpystr ("%s %s -l %s exec /etc/r%sd");
+    if (!rshcommand) rshcommand = cpystr ("%s %s -l %s exec /usr/sbin/r%sd");
   }
   else return NIL;		/* rsh disabled */
 				/* look like domain literal? */
